<% content_for :title, "Mes Devis - Devis WhatsApp" %>

<div class="admin-page-header">
  <div>
    <h1>Mes Devis</h1>
    <p class="text-muted">Consultez et gérez tous vos devis créés via WhatsApp</p>
  </div>
</div>

<!-- Statistics Cards -->
<div class="stats-grid" style="margin-bottom: var(--spacing-lg);">
  <div class="stat-card">
    <div class="stat-icon bg-blue">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
      </svg>
    </div>
    <div class="stat-content">
      <div class="stat-value">12</div>
      <div class="stat-label">Devis créés</div>
      <div class="stat-change positive">+3 ce mois-ci</div>
    </div>
  </div>

  <div class="stat-card">
    <div class="stat-icon bg-orange">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
      </svg>
    </div>
    <div class="stat-content">
      <div class="stat-value">4</div>
      <div class="stat-label">En attente</div>
      <div class="stat-change neutral">Non validés</div>
    </div>
  </div>

  <div class="stat-card">
    <div class="stat-icon bg-green">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    </div>
    <div class="stat-content">
      <div class="stat-value">7</div>
      <div class="stat-label">Acceptés</div>
      <div class="stat-change positive">58% taux</div>
    </div>
  </div>

  <div class="stat-card">
    <div class="stat-icon bg-purple">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="1" x2="12" y2="23"></line>
        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
      </svg>
    </div>
    <div class="stat-content">
      <div class="stat-value">42 850 €</div>
      <div class="stat-label">Montant total</div>
      <div class="stat-change positive">+12 450€ ce mois</div>
    </div>
  </div>
</div>

<!-- Filters -->
<div class="admin-card" style="margin-bottom: var(--spacing-lg);">
  <div class="filters-bar">
    <div class="search-box">
      <input type="text" class="form-input" placeholder="Rechercher un devis...">
    </div>
    <div class="filter-group">
      <select class="form-select">
        <option>Tous les statuts</option>
        <option>Envoyés</option>
        <option>Acceptés</option>
        <option>Refusés</option>
        <option>Brouillons</option>
      </select>
    </div>
    <div class="filter-group">
      <select class="form-select">
        <option>Tous les clients</option>
        <option>Entreprise Dubois</option>
        <option>Martin SAS</option>
        <option>Résidence Les Pins</option>
      </select>
    </div>
    <div class="filter-actions">
      <button type="button" class="btn btn-primary btn-sm">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
        Rechercher
      </button>
      <button type="button" class="btn btn-secondary btn-sm">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
          <path d="M21 3v5h-5"></path>
          <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
          <path d="M3 21v-5h5"></path>
        </svg>
        Réinitialiser
      </button>
    </div>
  </div>
</div>

<!-- Quotes Table -->
<div class="admin-card">
  <div class="card-header">
    <h2>Liste des Devis</h2>
  </div>
  <div style="overflow-x: auto;">
    <table class="admin-table">
      <thead>
        <tr>
          <th>Numéro</th>
          <th>Client</th>
          <th>Date</th>
          <th>Montant TTC</th>
          <th>Statut</th>
          <th style="text-align: right;">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>DEVIS-2025-0042</strong></td>
          <td>
            <div>Entreprise Dubois</div>
            <div class="text-muted small">Lyon</div>
          </td>
          <td>25 oct. 2025</td>
          <td><strong>16 590,00 €</strong></td>
          <td><span class="status-badge status-success">Accepté</span></td>
          <td style="text-align: right;">
            <div class="action-buttons">
              <%= link_to quote_path(1), class: "btn btn-xs btn-outline" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14" height="14" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Voir</span>
              <% end %>
            </div>
          </td>
        </tr>
        <tr>
          <td><strong>DEVIS-2025-0041</strong></td>
          <td>
            <div>Martin SAS</div>
            <div class="text-muted small">Paris</div>
          </td>
          <td>23 oct. 2025</td>
          <td><strong>8 420,00 €</strong></td>
          <td><span class="status-badge status-info">Envoyé</span></td>
          <td style="text-align: right;">
            <div class="action-buttons">
              <%= link_to quote_path(2), class: "btn btn-xs btn-outline" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14" height="14" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Voir</span>
              <% end %>
            </div>
          </td>
        </tr>
        <tr>
          <td><strong>DEVIS-2025-0040</strong></td>
          <td>
            <div>Résidence Les Pins</div>
            <div class="text-muted small">Marseille</div>
          </td>
          <td>20 oct. 2025</td>
          <td><strong>12 350,00 €</strong></td>
          <td><span class="status-badge status-success">Accepté</span></td>
          <td style="text-align: right;">
            <div class="action-buttons">
              <%= link_to quote_path(3), class: "btn btn-xs btn-outline" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14" height="14" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Voir</span>
              <% end %>
            </div>
          </td>
        </tr>
        <tr>
          <td><strong>DEVIS-2025-0039</strong></td>
          <td>
            <div>Société Bertrand</div>
            <div class="text-muted small">Toulouse</div>
          </td>
          <td>18 oct. 2025</td>
          <td><strong>5 680,00 €</strong></td>
          <td><span class="status-badge status-danger">Refusé</span></td>
          <td style="text-align: right;">
            <div class="action-buttons">
              <%= link_to quote_path(4), class: "btn btn-xs btn-outline" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14" height="14" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Voir</span>
              <% end %>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination">
    <button class="btn btn-secondary btn-sm" disabled>
      <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
      </svg>
      Précédent
    </button>
    <span class="pagination-info">Page 1 sur 3</span>
    <button class="btn btn-secondary btn-sm">
      Suivant
      <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"/>
      </svg>
    </button>
  </div>
</div>
