<% content_for :title, "Modifier Client - Devis WhatsApp" %>
<% content_for :page_title, "Modifier le client" %>
<% content_for :back_path, client_path(@client&.id || params[:id]) %>
<% content_for :active_page, :clients %>

<!-- Content -->
<main class="p-4 max-w-2xl mx-auto">
  
  <%= form_with(url: client_path(@client&.id || params[:id]), method: :patch, local: true) do |f| %>
    
    <!-- Basic Info -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-4">
      <h3 class="font-semibold text-gray-900 mb-4">Informations de base</h3>
      
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Nom du client *</label>
          <%= f.text_field :name, value: @client&.name, class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-green-500 focus:outline-none", placeholder: "Ex: Entreprise Dubois", required: true %>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Adresse compl√®te *</label>
          <%= f.text_area :address, value: @client&.address, rows: 3, class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-green-500 focus:outline-none", placeholder: "15 rue de la Paix, 75001 Paris, France", required: true %>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">SIRET (si professionnel)</label>
          <%= f.text_field :siret, value: @client&.siret, class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-green-500 focus:outline-none", placeholder: "123 456 789 01234" %>
          <p class="text-xs text-gray-500 mt-1">Pour les entreprises uniquement</p>
        </div>
      </div>
    </div>

    <!-- Contact Info -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-4">
      <h3 class="font-semibold text-gray-900 mb-4">Contacts (optionnel)</h3>
      
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">T√©l√©phone</label>
          <%= f.text_field :phone, value: @client&.phone, class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-green-500 focus:outline-none", placeholder: "+33 6 12 34 56 78" %>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
          <%= f.email_field :email, value: @client&.email, class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-green-500 focus:outline-none", placeholder: "contact@exemple.com" %>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="flex gap-3">
      <%= link_to client_path(@client&.id || params[:id]), class: "flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-4 px-4 rounded-lg text-center transition" do %>
        Annuler
      <% end %>
      <%= f.submit "Enregistrer", class: "flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-4 rounded-lg text-center transition cursor-pointer" %>
    </div>
    
    <!-- Delete -->
    <div class="mt-6 pt-6 border-t border-gray-200">
      <%= button_to client_path(@client&.id || params[:id]), method: :delete, data: { turbo_method: :delete, turbo_confirm: "√ätes-vous s√ªr de vouloir supprimer ce client ?" }, class: "w-full bg-red-50 hover:bg-red-100 text-red-600 font-medium py-3 px-4 rounded-lg transition" do %>
        üóëÔ∏è Supprimer ce client
      <% end %>
    </div>
    
  <% end %>

</main>
