<% content_for :title, "Mes Factures - Devis WhatsApp" %>

<div class="admin-page-header">
  <div>
    <h1>Mes Factures</h1>
    <p class="text-muted">Consultez et gérez toutes vos factures créées via WhatsApp</p>
  </div>
</div>

<!-- Statistics Cards -->
<div class="stats-grid" style="margin-bottom: var(--spacing-lg);">
  <div class="stat-card">
    <div class="stat-icon bg-blue">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
      </svg>
    </div>
    <div class="stat-content">
      <div class="stat-value">15</div>
      <div class="stat-label">Factures émises</div>
      <div class="stat-change positive">+4 ce mois-ci</div>
    </div>
  </div>

  <div class="stat-card">
    <div class="stat-icon bg-green">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    </div>
    <div class="stat-content">
      <div class="stat-value">12</div>
      <div class="stat-label">Payées</div>
      <div class="stat-change positive">80% taux</div>
    </div>
  </div>

  <div class="stat-card">
    <div class="stat-icon bg-orange">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 8v4l2 2"></path>
        <circle cx="12" cy="12" r="10"></circle>
      </svg>
    </div>
    <div class="stat-content">
      <div class="stat-value">2</div>
      <div class="stat-label">En attente</div>
      <div class="stat-change neutral">Non payées</div>
    </div>
  </div>

  <div class="stat-card">
    <div class="stat-icon bg-purple">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="1" x2="12" y2="23"></line>
        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
      </svg>
    </div>
    <div class="stat-content">
      <div class="stat-value">58 420 €</div>
      <div class="stat-label">Chiffre d'affaires</div>
      <div class="stat-change positive">+16 590€ ce mois</div>
    </div>
  </div>
</div>

<!-- Filters -->
<div class="admin-card" style="margin-bottom: var(--spacing-lg);">
  <div class="filters-bar">
    <div class="search-box">
      <input type="text" class="form-input" placeholder="Rechercher une facture...">
    </div>
    <div class="filter-group">
      <select class="form-select">
        <option>Tous les statuts</option>
        <option>Payées</option>
        <option>En attente</option>
        <option>En retard</option>
        <option>Brouillons</option>
      </select>
    </div>
    <div class="filter-group">
      <select class="form-select">
        <option>Tous les clients</option>
        <option>Entreprise Dubois</option>
        <option>Martin SAS</option>
        <option>Résidence Les Pins</option>
      </select>
    </div>
  </div>
</div>

<!-- Invoices Table -->
<div class="admin-card">
  <div class="card-header">
    <h2>Liste des Factures</h2>
  </div>
  <div style="overflow-x: auto;">
    <table class="admin-table">
      <thead>
        <tr>
          <th>Numéro</th>
          <th>Client</th>
          <th>Date d'émission</th>
          <th>Échéance</th>
          <th>Montant TTC</th>
          <th>Statut</th>
          <th style="text-align: right;">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>FACT-2025-0028</strong></td>
          <td>
            <div>Entreprise Dubois</div>
            <div class="text-muted small">Lyon</div>
          </td>
          <td>28 oct. 2025</td>
          <td>27 nov. 2025</td>
          <td><strong>16 590,00 €</strong></td>
          <td><span class="status-badge status-success">Payée</span></td>
          <td style="text-align: right;">
            <div class="action-buttons">
              <%= link_to invoice_path(1), class: "btn btn-xs btn-outline" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14" height="14" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Voir</span>
              <% end %>
            </div>
          </td>
        </tr>
        <tr>
          <td><strong>FACT-2025-0027</strong></td>
          <td>
            <div>Martin SAS</div>
            <div class="text-muted small">Paris</div>
          </td>
          <td>26 oct. 2025</td>
          <td>25 nov. 2025</td>
          <td><strong>8 420,00 €</strong></td>
          <td><span class="status-badge status-info">Envoyée</span></td>
          <td style="text-align: right;">
            <div class="action-buttons">
              <%= link_to invoice_path(2), class: "btn btn-xs btn-outline" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14" height="14" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Voir</span>
              <% end %>
            </div>
          </td>
        </tr>
        <tr>
          <td><strong>FACT-2025-0026</strong></td>
          <td>
            <div>Résidence Les Pins</div>
            <div class="text-muted small">Marseille</div>
          </td>
          <td>22 oct. 2025</td>
          <td>21 nov. 2025</td>
          <td><strong>12 350,00 €</strong></td>
          <td><span class="status-badge status-success">Payée</span></td>
          <td style="text-align: right;">
            <div class="action-buttons">
              <%= link_to invoice_path(3), class: "btn btn-xs btn-outline" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14" height="14" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Voir</span>
              <% end %>
            </div>
          </td>
        </tr>
        <tr>
          <td><strong>FACT-2025-0025</strong></td>
          <td>
            <div>Copropriété Soleil</div>
            <div class="text-muted small">Nice</div>
          </td>
          <td>18 oct. 2025</td>
          <td>17 nov. 2025</td>
          <td><strong>21 060,00 €</strong></td>
          <td><span class="status-badge status-success">Payée</span></td>
          <td style="text-align: right;">
            <div class="action-buttons">
              <%= link_to invoice_path(4), class: "btn btn-xs btn-outline" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14" height="14" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Voir</span>
              <% end %>
            </div>
          </td>
        </tr>
        <tr>
          <td><strong>FACT-2025-0024</strong></td>
          <td>
            <div>Société Bertrand</div>
            <div class="text-muted small">Toulouse</div>
          </td>
          <td>10 oct. 2025</td>
          <td><span class="danger-text">09 oct. 2025</span></td>
          <td><strong>7 200,00 €</strong></td>
          <td><span class="status-badge status-danger">En retard</span></td>
          <td style="text-align: right;">
            <div class="action-buttons">
              <%= link_to invoice_path(5), class: "btn btn-xs btn-outline" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14" height="14" style="display: inline-block; vertical-align: middle; margin-right: 4px;">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Voir</span>
              <% end %>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination">
    <button class="btn btn-secondary btn-sm" disabled>
      <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
      </svg>
      Précédent
    </button>
    <span class="pagination-info">Page 1 sur 3</span>
    <button class="btn btn-secondary btn-sm">
      Suivant
      <svg width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"/>
      </svg>
    </button>
  </div>
</div>
