<% content_for :title, "Mes Factures - Factures WhatsApp" %>

<div class="admin-page-header">
  <div>
    <h1>Mes Factures</h1>
    <p class="text-muted">Consultez et gérez toutes vos factures créées via WhatsApp</p>
  </div>
  <%= link_to whatsapp_connect_path, class: "btn btn-primary" do %>
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
    </svg>
    <span>Créer une facture</span>
  <% end %>
</div>

<!-- Info Alert -->
<div class="alert-item info" style="margin-bottom: var(--spacing-xl);">
  <div class="alert-icon">ℹ️</div>
  <div class="alert-content">
    <div class="alert-title">Comment créer une facture ?</div>
    <div class="alert-meta">Envoyez un message vocal ou texte sur WhatsApp avec <strong>"créer une facture"</strong> ou <strong>"nouvelle facture"</strong>. L'assistant vous guidera étape par étape. Vous pouvez lier la facture à un devis existant ou créer une facture indépendante.</div>
  </div>
  <div style="display: flex; justify-content: flex-end;">
    <%= link_to whatsapp_connect_path, class: "btn btn-sm btn-primary", style: "width: auto;" do %>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
      </svg>
      <span>Connecter WhatsApp</span>
    <% end %>
  </div>
</div>

<!-- Statistics Cards -->
<div class="stats-grid">
  <div class="stat-card stat-card-primary">
    <div class="stat-icon stat-icon-primary">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="9" y1="15" x2="15" y2="15"></line>
      </svg>
    </div>
    <div class="stat-content">
      <div class="stat-value">0</div>
      <div class="stat-label">Factures créées</div>
      <div class="stat-change neutral">Ce mois-ci</div>
    </div>
  </div>

  <div class="stat-card stat-card-primary">
    <div class="stat-icon stat-icon-primary">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <polyline points="12 6 12 12 16 14"></polyline>
      </svg>
    </div>
    <div class="stat-content">
      <div class="stat-value">0</div>
      <div class="stat-label">En attente</div>
      <div class="stat-change neutral">Non payées</div>
    </div>
  </div>

  <div class="stat-card stat-card-primary">
    <div class="stat-icon stat-icon-primary">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    </div>
    <div class="stat-content">
      <div class="stat-value">0</div>
      <div class="stat-label">Payées</div>
      <div class="stat-change neutral">Total</div>
    </div>
  </div>

  <div class="stat-card stat-card-primary">
    <div class="stat-icon stat-icon-primary">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="12" y1="1" x2="12" y2="23"></line>
        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
      </svg>
    </div>
    <div class="stat-content">
      <div class="stat-value">0 €</div>
      <div class="stat-label">Montant total</div>
      <div class="stat-change neutral">Ce mois-ci</div>
    </div>
  </div>
</div>

<!-- Main Content Grid -->
<div class="admin-content-grid">
  <!-- Recent Invoices Section -->
  <div class="admin-card">
    <div class="card-header">
      <h2>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; vertical-align: middle; margin-right: 0.5rem;">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="9" y1="15" x2="15" y2="15"></line>
        </svg>
        Factures récentes
      </h2>
    </div>
    <div style="padding: var(--spacing-xl); text-align: center;">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 1rem; color: var(--text-gray);">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="9" y1="15" x2="15" y2="15"></line>
      </svg>
      <h3 style="font-weight: 600; color: var(--text-dark); margin-bottom: 0.5rem;">Aucune facture pour le moment</h3>
      <p style="color: var(--text-muted); margin-bottom: 1.5rem;">
        Vos factures créées via WhatsApp apparaîtront ici.
        Commencez par connecter votre WhatsApp !
      </p>
      <%= link_to "Connecter WhatsApp", whatsapp_connect_path, class: "btn btn-sm btn-primary" %>
    </div>
  </div>

  <!-- Quick Actions Section -->
  <div class="admin-card">
    <div class="card-header">
      <h2>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; vertical-align: middle; margin-right: 0.5rem;">
          <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
        </svg>
        Fonctionnalités
      </h2>
    </div>
    <div class="activity-list">
      <div class="activity-item">
        <div class="activity-icon bg-green">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
            <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
            <line x1="12" y1="19" x2="12" y2="23"></line>
            <line x1="8" y1="23" x2="16" y2="23"></line>
          </svg>
        </div>
        <div class="activity-content">
          <div class="activity-title">Commande vocale</div>
          <div class="activity-meta">Créez vos factures par message vocal sur WhatsApp en français ou en turc</div>
        </div>
      </div>
      
      <div class="activity-item">
        <div class="activity-icon bg-blue">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
          </svg>
        </div>
        <div class="activity-content">
          <div class="activity-title">Lien avec devis</div>
          <div class="activity-meta">Créez une facture basée sur un devis existant ou une facture indépendante</div>
        </div>
      </div>
      
      <div class="activity-item">
        <div class="activity-icon bg-purple">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
          </svg>
        </div>
        <div class="activity-content">
          <div class="activity-title">PDF professionnel</div>
          <div class="activity-meta">Recevez automatiquement un PDF professionnel sur WhatsApp après validation</div>
        </div>
      </div>
      
      <div class="activity-item">
        <div class="activity-icon bg-orange">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="1" x2="12" y2="23"></line>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
          </svg>
        </div>
        <div class="activity-content">
          <div class="activity-title">Calculs automatiques</div>
          <div class="activity-meta">TVA et totaux calculés automatiquement pour chaque ligne</div>
        </div>
      </div>

      <div class="activity-item">
        <div class="activity-icon bg-red">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </div>
        <div class="activity-content">
          <div class="activity-title">Suivi des paiements</div>
          <div class="activity-meta">Statuts : brouillon, envoyée, payée, en retard avec dates d'échéance</div>
        </div>
      </div>
    </div>
    
    <div style="padding: var(--spacing-lg); display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; border-top: 1px solid var(--border-color);">
      <%= link_to clients_path, class: "btn btn-sm btn-outline" do %>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
        <span>Mes clients</span>
      <% end %>
      
      <%= link_to quotes_path, class: "btn btn-sm btn-outline" do %>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
        </svg>
        <span>Mes devis</span>
      <% end %>
    </div>
  </div>
</div>
