<% content_for :title, "Devis - Jean Dupont" %>

<div class="admin-page-header">
  <div class="header-with-actions">
    <div>
      <%= link_to "‚Üê Retour √† l'utilisateur", admin_user_path(params[:id]), class: "back-link" %>
      <h1>Devis de Jean Dupont</h1>
      <p class="text-muted">Dupont Ma√ßonnerie ‚Ä¢ 42 devis cr√©√©s</p>
    </div>
  </div>
</div>

<!-- Stats -->
<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-icon bg-blue">üìã</div>
    <div class="stat-content">
      <div class="stat-value">42</div>
      <div class="stat-label">Total devis</div>
      <div class="stat-change positive">+8 ce mois</div>
    </div>
  </div>
  <div class="stat-card">
    <div class="stat-icon bg-green">‚úì</div>
    <div class="stat-content">
      <div class="stat-value">28</div>
      <div class="stat-label">Accept√©s</div>
      <div class="stat-detail">66.7% taux conversion</div>
    </div>
  </div>
  <div class="stat-card">
    <div class="stat-icon bg-orange">‚è≥</div>
    <div class="stat-content">
      <div class="stat-value">8</div>
      <div class="stat-label">En attente</div>
      <div class="stat-detail">19% du total</div>
    </div>
  </div>
  <div class="stat-card">
    <div class="stat-icon bg-purple">üí∞</div>
    <div class="stat-content">
      <div class="stat-value">87 420‚Ç¨</div>
      <div class="stat-label">Montant total</div>
      <div class="stat-detail">TTC cumul√©</div>
    </div>
  </div>
</div>

<!-- Quotes Table -->
<div class="admin-card">
  <div class="table-responsive" data-controller="table-scroll">
    <table class="admin-table">
      <thead>
        <tr>
          <th>Num√©ro</th>
          <th>Client</th>
          <th>Date d'√©mission</th>
          <th>Validit√©</th>
          <th>Montant HT</th>
          <th>Montant TTC</th>
          <th>Statut</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td data-label="Num√©ro">D-2025-0456</td>
          <td data-label="Client">
            <div class="user-info-compact">
              <div class="user-avatar-sm">MC</div>
              <span>Mairie de Colombes</span>
            </div>
          </td>
          <td data-label="Date">27 mai 2025</td>
          <td data-label="Validit√©">
            <div>30 jours</div>
            <div class="text-muted small">Expire le 26 juin</div>
          </td>
          <td data-label="Montant HT">2 800‚Ç¨</td>
          <td data-label="Montant TTC" class="font-weight-bold">3 360‚Ç¨</td>
          <td data-label="Statut"><span class="status-badge status-warning">En attente</span></td>
          <td data-label="Actions">
            <div class="action-buttons">
              <%= link_to quote_admin_user_path(params[:id], quote_id: 1), class: "btn btn-xs btn-outline" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14" height="14">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Voir</span>
              <% end %>
            </div>
          </td>
        </tr>
        <tr>
          <td data-label="Num√©ro">D-2025-0423</td>
          <td data-label="Client">
            <div class="user-info-compact">
              <div class="user-avatar-sm">SL</div>
              <span>Sophie Lambert</span>
            </div>
          </td>
          <td data-label="Date">22 mai 2025</td>
          <td data-label="Validit√©">
            <div>30 jours</div>
            <div class="text-muted small">Expire le 21 juin</div>
          </td>
          <td data-label="Montant HT">4 500‚Ç¨</td>
          <td data-label="Montant TTC" class="font-weight-bold">5 400‚Ç¨</td>
          <td data-label="Statut"><span class="status-badge status-success">Accept√©</span></td>
          <td data-label="Actions">
            <div class="action-buttons">
              <%= link_to quote_admin_user_path(params[:id], quote_id: 2), class: "btn btn-xs btn-outline" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14" height="14">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Voir</span>
              <% end %>
            </div>
          </td>
        </tr>
        <tr>
          <td data-label="Num√©ro">D-2025-0401</td>
          <td data-label="Client">
            <div class="user-info-compact">
              <div class="user-avatar-sm">AB</div>
              <span>ABC Construction</span>
            </div>
          </td>
          <td data-label="Date">18 mai 2025</td>
          <td data-label="Validit√©">
            <div class="danger-text">Expir√©</div>
            <div class="text-muted small">Expir√© le 17 mai</div>
          </td>
          <td data-label="Montant HT">6 200‚Ç¨</td>
          <td data-label="Montant TTC" class="font-weight-bold">7 440‚Ç¨</td>
          <td data-label="Statut"><span class="status-badge status-danger">Refus√©</span></td>
          <td data-label="Actions">
            <div class="action-buttons">
              <%= link_to quote_admin_user_path(params[:id], quote_id: 3), class: "btn btn-xs btn-outline" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14" height="14">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>Voir</span>
              <% end %>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
