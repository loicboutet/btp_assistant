<% content_for :title, "D√©tails Abonnement - Admin" %>

<div class="admin-page-header">
  <div style="display: flex; justify-content: space-between; align-items: center;">
    <div>
      <h1>D√©tails de l'abonnement</h1>
      <p class="text-muted">Abonnement #SUB_12345678</p>
    </div>
    <%= link_to "‚Üê Retour aux abonnements", admin_subscriptions_path, class: "btn btn-outline" %>
  </div>
</div>

<!-- User Information -->
<div class="admin-card">
  <div class="card-header">
    <h2>Informations utilisateur</h2>
  </div>
  <div style="padding: var(--spacing-lg);">
    <div class="user-info" style="margin-bottom: var(--spacing-lg);">
      <div class="user-avatar" style="width: 60px; height: 60px; font-size: 24px;">JD</div>
      <div>
        <div class="user-name" style="font-size: 1.25rem; font-weight: 600;">Jean Dupont</div>
        <div class="user-email">jean.dupont@example.fr</div>
        <%= link_to "Voir le profil complet", admin_user_path(1), class: "btn btn-sm btn-outline" style="margin-top: var(--spacing-sm);" %>
      </div>
    </div>
  </div>
</div>

<!-- Subscription Details -->
<div class="admin-card" style="margin-top: var(--spacing-lg);">
  <div class="card-header">
    <h2>D√©tails de l'abonnement</h2>
  </div>
  <div style="padding: var(--spacing-lg);">
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-lg);">
      <div>
        <div class="text-muted small">Plan</div>
        <div style="font-weight: 600; margin-top: var(--spacing-xs);">Mensuel</div>
      </div>
      <div>
        <div class="text-muted small">Statut</div>
        <div style="margin-top: var(--spacing-xs);">
          <span class="status-badge status-success">Actif</span>
        </div>
      </div>
      <div>
        <div class="text-muted small">Montant</div>
        <div style="font-weight: 600; margin-top: var(--spacing-xs); color: var(--color-success);">59‚Ç¨ / mois</div>
      </div>
      <div>
        <div class="text-muted small">Date de d√©but</div>
        <div style="font-weight: 600; margin-top: var(--spacing-xs);">15 mars 2025</div>
      </div>
      <div>
        <div class="text-muted small">Prochain paiement</div>
        <div style="font-weight: 600; margin-top: var(--spacing-xs);">15 juin 2025</div>
      </div>
      <div>
        <div class="text-muted small">P√©riode d'essai</div>
        <div style="font-weight: 600; margin-top: var(--spacing-xs);">Termin√©e le 29 mars 2025</div>
      </div>
    </div>
  </div>
</div>

<!-- Stripe Information -->
<div class="admin-card" style="margin-top: var(--spacing-lg);">
  <div class="card-header">
    <h2>Informations Stripe</h2>
  </div>
  <div style="padding: var(--spacing-lg);">
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-lg);">
      <div>
        <div class="text-muted small">Customer ID</div>
        <div style="font-family: monospace; margin-top: var(--spacing-xs);">cus_AbCdEfGh</div>
        <a href="https://dashboard.stripe.com/customers/cus_AbCdEfGh" target="_blank" class="btn btn-sm btn-outline" style="margin-top: var(--spacing-sm);">
          Voir dans Stripe ‚Üí
        </a>
      </div>
      <div>
        <div class="text-muted small">Subscription ID</div>
        <div style="font-family: monospace; margin-top: var(--spacing-xs);">sub_12345678</div>
        <a href="https://dashboard.stripe.com/subscriptions/sub_12345678" target="_blank" class="btn btn-sm btn-outline" style="margin-top: var(--spacing-sm);">
          Voir dans Stripe ‚Üí
        </a>
      </div>
      <div>
        <div class="text-muted small">M√©thode de paiement</div>
        <div style="margin-top: var(--spacing-xs);">
          <div>üí≥ Visa ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 4242</div>
          <div class="text-muted small">Expire 12/2027</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Payment History -->
<div class="admin-card" style="margin-top: var(--spacing-lg);">
  <div class="card-header">
    <h2>Historique des paiements</h2>
  </div>
  <table class="admin-table">
    <thead>
      <tr>
        <th>Date</th>
        <th>Invoice ID</th>
        <th>Montant</th>
        <th>Statut</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>15 mai 2025</td>
        <td style="font-family: monospace;">in_1234567</td>
        <td class="font-weight-bold">59‚Ç¨</td>
        <td><span class="status-badge status-success">Pay√©</span></td>
        <td>
          <a href="https://dashboard.stripe.com/invoices/in_1234567" target="_blank" class="btn btn-sm btn-outline">
            Voir
          </a>
        </td>
      </tr>
      <tr>
        <td>15 avril 2025</td>
        <td style="font-family: monospace;">in_1234566</td>
        <td class="font-weight-bold">59‚Ç¨</td>
        <td><span class="status-badge status-success">Pay√©</span></td>
        <td>
          <a href="https://dashboard.stripe.com/invoices/in_1234566" target="_blank" class="btn btn-sm btn-outline">
            Voir
          </a>
        </td>
      </tr>
      <tr>
        <td>15 mars 2025</td>
        <td style="font-family: monospace;">in_1234565</td>
        <td class="font-weight-bold">0‚Ç¨</td>
        <td><span class="status-badge status-info">Essai gratuit</span></td>
        <td>
          <a href="https://dashboard.stripe.com/invoices/in_1234565" target="_blank" class="btn btn-sm btn-outline">
            Voir
          </a>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Actions -->
<div class="admin-card" style="margin-top: var(--spacing-lg);">
  <div class="card-header">
    <h2>Actions</h2>
  </div>
  <div style="padding: var(--spacing-lg);">
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-md);">
      <button class="btn btn-primary">
        Acc√©der au portail Stripe
      </button>
      <button class="btn btn-outline">
        Annuler l'abonnement
      </button>
      <button class="btn btn-outline">
        Suspendre l'abonnement
      </button>
      <button class="btn btn-outline">
        Modifier le plan
      </button>
    </div>
  </div>
</div>

<!-- Stats -->
<div class="admin-card" style="margin-top: var(--spacing-xl);">
  <div class="card-header">
    <h2>Statistiques</h2>
  </div>
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-label">Revenu total</div>
      <div class="stat-value">177‚Ç¨</div>
      <div class="stat-detail">3 paiements</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">LTV (Lifetime Value)</div>
      <div class="stat-value">177‚Ç¨</div>
      <div class="stat-detail">Depuis 3 mois</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Taux de succ√®s</div>
      <div class="stat-value">100%</div>
      <div class="stat-detail">3/3 paiements r√©ussis</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Prochain paiement</div>
      <div class="stat-value">15 jours</div>
      <div class="stat-detail">Le 15 juin 2025</div>
    </div>
  </div>
</div>
