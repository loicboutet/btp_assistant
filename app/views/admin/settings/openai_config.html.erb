<% content_for :title, "Configuration OpenAI - Param√®tres Admin" %>

<div class="admin-page-header">
  <%= link_to "‚Üê Retour aux param√®tres", admin_settings_path, class: "back-link" %>
  <h1>Configuration OpenAI</h1>
  <p class="text-muted">Intelligence artificielle et traitement des messages</p>
</div>

<!-- Status Overview -->
<div class="stats-grid">
  <div class="stat-card">
    <div class="stat-label">Statut API</div>
    <div class="stat-value"><span class="status-badge status-success">Op√©rationnel</span></div>
    <div class="stat-detail">GPT-4 + Whisper</div>
  </div>
  <div class="stat-card">
    <div class="stat-label">Requ√™tes (24h)</div>
    <div class="stat-value">3 247</div>
    <div class="stat-detail">GPT: 1 355, Whisper: 1 892</div>
  </div>
  <div class="stat-card">
    <div class="stat-label">Taux de succ√®s</div>
    <div class="stat-value success-text">96.8%</div>
    <div class="stat-detail">3 143 / 3 247</div>
  </div>
  <div class="stat-card">
    <div class="stat-label">Co√ªt estim√© (mois)</div>
    <div class="stat-value">~247‚Ç¨</div>
    <div class="stat-detail">Bas√© sur 30j</div>
  </div>
</div>

<!-- Configuration Form -->
<div class="admin-card" style="margin-top: var(--spacing-xl);">
  <div class="card-header">
    <h2>Configuration API</h2>
    <button class="btn btn-primary">Sauvegarder</button>
  </div>
  <form class="settings-form">
    <div class="form-group">
      <label class="form-label">API Key</label>
      <input type="password" class="form-input" value="sk-‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" placeholder="sk-...">
      <small class="form-hint">Cl√© API OpenAI</small>
    </div>

    <div class="form-group">
      <label class="form-label">Organization ID</label>
      <input type="text" class="form-input" value="org-‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" placeholder="org-...">
      <small class="form-hint">ID de votre organisation OpenAI (optionnel)</small>
    </div>
  </form>
</div>

<!-- GPT Configuration -->
<div class="admin-card" style="margin-top: var(--spacing-xl);">
  <div class="card-header">
    <h2>Configuration GPT (Traitement de texte)</h2>
    <button class="btn btn-primary">Sauvegarder</button>
  </div>
  <form class="settings-form">
    <div class="form-group">
      <label class="form-label">Mod√®le GPT</label>
      <select class="form-select">
        <option>GPT-3.5 Turbo</option>
        <option selected>GPT-4</option>
        <option>GPT-4 Turbo</option>
      </select>
      <small class="form-hint">Mod√®le utilis√© pour le traitement des conversations</small>
    </div>

    <div class="form-group">
      <label class="form-label">Temperature</label>
      <input type="number" class="form-input" value="0.7" min="0" max="2" step="0.1">
      <small class="form-hint">Contr√¥le la cr√©ativit√© des r√©ponses (0-2). Recommand√©: 0.7</small>
    </div>

    <div class="form-group">
      <label class="form-label">Max Tokens</label>
      <input type="number" class="form-input" value="2000" min="100" max="4000" step="100">
      <small class="form-hint">Longueur maximale des r√©ponses</small>
    </div>

    <div class="form-group">
      <label class="form-label">Langues support√©es</label>
      <div class="checkbox-group">
        <label class="checkbox-label">
          <input type="checkbox" checked disabled>
          <span>üá´üá∑ Fran√ßais</span>
        </label>
        <label class="checkbox-label">
          <input type="checkbox" checked disabled>
          <span>üáπüá∑ Turc</span>
        </label>
      </div>
      <small class="form-hint">GPT d√©tecte automatiquement la langue de l'utilisateur</small>
    </div>
  </form>
</div>

<!-- Whisper Configuration -->
<div class="admin-card" style="margin-top: var(--spacing-xl);">
  <div class="card-header">
    <h2>Configuration Whisper (Transcription vocale)</h2>
    <button class="btn btn-primary">Sauvegarder</button>
  </div>
  <form class="settings-form">
    <div class="form-group">
      <label class="form-label">Mod√®le Whisper</label>
      <select class="form-select">
        <option selected>Whisper-1</option>
      </select>
      <small class="form-hint">Mod√®le utilis√© pour la transcription audio</small>
    </div>

    <div class="form-group">
      <label class="form-label">D√©tection automatique de langue</label>
      <label class="checkbox-label">
        <input type="checkbox" checked>
        <span>Activer la d√©tection automatique</span>
      </label>
      <small class="form-hint">Whisper d√©tecte automatiquement la langue parl√©e</small>
    </div>

    <div class="form-group">
      <label class="form-label">Format audio support√©</label>
      <input type="text" class="form-input" value="mp3, wav, ogg, m4a" readonly>
      <small class="form-hint">Formats audio accept√©s par Whisper</small>
    </div>
  </form>
</div>

<!-- Usage Statistics -->
<div class="admin-card" style="margin-top: var(--spacing-xl);">
  <div class="card-header">
    <h2>Statistiques d'utilisation (30j)</h2>
  </div>
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-label">Total requ√™tes GPT</div>
      <div class="stat-value">40 650</div>
      <div class="stat-detail">~1 355/jour</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Total transcriptions Whisper</div>
      <div class="stat-value">56 760</div>
      <div class="stat-detail">~1 892/jour</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Tokens GPT utilis√©s</div>
      <div class="stat-value">2.4M</div>
      <div class="stat-detail">~80K/jour</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Minutes audio transcrits</div>
      <div class="stat-value">947 min</div>
      <div class="stat-detail">~31.5 min/jour</div>
    </div>
  </div>
</div>

<!-- Performance -->
<div class="admin-card" style="margin-top: var(--spacing-xl);">
  <div class="card-header">
    <h2>Performance & Qualit√©</h2>
  </div>
  <div class="details-list">
    <div class="detail-item">
      <span class="detail-label">Taux de succ√®s GPT</span>
      <span class="detail-value success-text">97.2%</span>
    </div>
    <div class="detail-item">
      <span class="detail-label">Taux de succ√®s Whisper</span>
      <span class="detail-value success-text">96.5%</span>
    </div>
    <div class="detail-item">
      <span class="detail-label">Temps de r√©ponse moyen GPT</span>
      <span class="detail-value">2.3s</span>
    </div>
    <div class="detail-item">
      <span class="detail-label">Temps de transcription moyen</span>
      <span class="detail-value">1.8s</span>
    </div>
    <div class="detail-item">
      <span class="detail-label">Pr√©cision transcription (estim√©e)</span>
      <span class="detail-value success-text">94%</span>
    </div>
    <div class="detail-item">
      <span class="detail-label">Satisfaction utilisateurs</span>
      <span class="detail-value success-text">4.6/5</span>
    </div>
  </div>
</div>
